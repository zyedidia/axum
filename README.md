# Axum

Axum is a small SoC built around the [Ibex](https://github.com/lowRISC/ibex)
RISC-V processor. It includes the processor itself, and a bus connecting GPIO,
timer, and UART devices. The build flow uses only open-source tooling and is
currently set up to target the open-source OrangeCrab ECP5-25F FPGA board. The
design can also be simulated using Verilator or Yosys CXXRTL.

The Ibex processor is configured in "small" mode, supporting RV32IMC, M-mode
and U-mode, and interrupts (primarily from the timer device).

The software uses the RISC-V GNU toolchain and includes a simple C library for
controlling the devices. This includes a minimal libc and printf support over
UART.

# Building

## Software

To build the software, you must have a RISC-V GNU toolchain installed.

Navigate to the program you want to build in the `sw` directory and run
`make install`. This will place the generated bin file in `mem/` at the
project root.

## Hardware

First install the necessary tooling:

* sv2v (synthesis, simulation)
* Yosys (synthesis, simulation)
* Verilator (simulation)
* Project Trellis (ECP5 P&R and programming)
* GTKWave (view waveforms generated by simulation)

Select the appropriate mem file by editing `config.mk` or supplying the `MEM`
variable directly with the target.

Then you can make the following targets:

```sh
make verilator # outputs verilator simulation to obj_dir/sim.out.vtor
make cxxrtl    # outputs CXXRTL simulation to sim/sim.out
make           # outputs bitstream file for selected board
make prog      # sends bitstream to FPGA (must be plugged in)
```
